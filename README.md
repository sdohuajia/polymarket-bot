# Polymarket BTC 15分钟自动交易脚本

这款脚本专为 Polymarket 的 BTC 15分钟涨跌市场设计。它利用 WebSocket 获取实时价格，根据预设的价差条件自动执行买入、止损卖出，并集成了 Web 可视化控制面板，方便实时监控。

## 🌟 主要功能

- **实时监控**: 通过 WebSocket 接入币安和 Polymarket，毫秒级获取 BTC 价格和市场波动。
- **自动交易**: 支持三种自定义触发条件，满足任一条件即自动下单。
- **智能止损**: 实时监控持仓，当价差低于设定阈值时自动平仓离场。
- **自动兑奖**: 集成 Polymarket Builder API，自动识别并兑换已赢取的奖励。
- **可视化面板**: 提供基于网页的仪表盘，直观展示账户余额、持仓详情、交易历史和系统日志。

## 🛠️ 环境准备

1. **Python 版本**: 建议安装 Python 3.8 或更高版本。
2. **安装依赖**:
   在终端/命令行执行以下命令安装必要框架：
   ```bash
   pip install -r requirements.txt
   ```
   *注意：py-clob-client、web3 等是核心依赖。*

## ⚙️ 配置指南

在使用之前，请编辑 `config.env` 文件进行相关设置：

### 1. 钱包与网络
- `PRIVATE_KEY`: 你的钱包私钥（用于签署交易，请务必妥善保存）。
- `POLYGON_RPC_URL`: Polygon 网络节点地址（如 Alchemy, Infura 或免费节点）。
- `SIGNATURE_TYPE`: 签名类型，推荐填 `2` (EOA)。

### 2. 代理设置 (可选)
- `HTTP_PROXY` / `HTTPS_PROXY`: 如果你在特定网络环境下，请填写代理地址。
  *格式: http://host:port 或 http://user:pass@host:port*

### 3. 下单策略
- `AUTO_TRADE`: 是否开启自动下单 (`true`/`false`)。
- `TRADE_AMOUNT`: 每次下单的金额 (单位: USDC)。

### 4. 触发条件 (满足任一即买入)
- `CONDITION_1_TIME` & `CONDITION_1_DIFF`: 在倒计时 X 秒内，价差达到 Y 时触发。
- 程序支持配置三组独立的时间与价差条件，以适应不同的行情节奏。

### 5. 风控与运行
- `STOP_LOSS_DIFF`: 止损线。当市场价差跌破此值，脚本会自动平仓。
- `CHECK_INTERVAL`: 价格检查的频率（秒）。

## 🚀 启动脚本

在项目根目录下运行：

```bash
python polymarket_auto_trade.py
```

## 📊 网页控制面板

脚本启动后，默认会自动开启一个 Web 服务器：
- **访问地址**: `http://localhost:5080` (或 `http://你的IP:5080`)
- **功能模块**:
  - **账户概览**: 查看账户余额、累计收益。
  - **实时数据**: 监控 BTC 当前价格与目标价。
  - **持仓追踪**: 展示当前持有的 Token 数量及预估盈亏。
  - **运行日志**: 实时滚动显示脚本的每一项操作。

## ⚠️ 注意事项

1. **安全第一**: 私钥是资产的唯一凭证，请勿将其上传到 GitHub 或分享给他人。
2. **资产检查**: 确保你的 Polygon 钱包中有足够的 USDC 用于交易，以及少量的 MATIC/POL 作为 Gas 费。
3. **策略风险**: 自动交易存在风险，建议先用小额资金进行测试。
4. **网络连接**: 建议在海外服务器上运行，以保证连接代理和 Polymarket 接口的稳定性。

---
*本项目仅供技术交流使用，交易盈亏自负。*
